<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Registrasi</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor"
      crossorigin="anonymous" />

    <style>
      body {
        background-image: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQ0MCIgaGVpZ2h0PSI2MDU0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik0xMjYzLjU0OCAyLjY3M0wtMTA3IDc5Mi44MDVWNzc0NWgxNjU1VjE1Ni45ODZMMTI4My42MTYgMi43MjZhMjAgMjAgMCAwIDAtMjAuMDY4LS4wNTN6IiBmaWxsPSIjRThFQUVEIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIG9wYWNpdHk9Ii43Ii8+PC9zdmc+");
      }
      .center-vertical {
        margin-top: 15vh;
      }
    </style>
  </head>
  <body>
    <!-- REGISTRASI -->
    <div class="row center-vertical">
      <div class="col-md-4"></div>
      <div class="bg-white col-md-4 shadow align-middle p-4">
        <form class="">
          <!-- USERNAME -->
          <div class="mb-3">
            <label for="username" class="form-label">Username</label>
            <input
              type="text"
              class="form-control"
              id="username"
              aria-describedby="emailHelp"
              placeholder="enter your username"
              required />
          </div>
          <!-- PASSWORD -->
          <div class="mb-3">
            <label for="password" class="form-label">Password</label>
            <input
              type="password"
              id="password"
              class="form-control"
              aria-describedby="passwordHelpBlock"
              placeholder="enter your password"
              required />
            <div class="invalid-feedback">
              Your password must be at least 6 characters long, containing uppercase letters, lowercase
              letters and numbers
            </div>
          </div>
          <!-- CONFIRM PASSWORD -->
          <div class="mb-3">
            <label for="confirm-password" class="form-label">Confirm Password</label>
            <input
              type="password"
              id="confirm-password"
              class="form-control"
              aria-describedby="passwordHelpBlock"
              placeholder="enter your password"
              required />
            <div class="invalid-feedback">Confirm password must match the password</div>
          </div>
          <!-- REGISTRASI -->
          <div class="d-grid">
            <button type="submit" id="registrasi" class="btn btn-dark text-center" disabled>
              Registrasi
            </button>
          </div>
        </form>
      </div>
    </div>

    <script src="script.js">
      const username = document.getElementById("username")
      const password = document.getElementById("password")
      const confirmPassword = document.getElementById("confirm-password")
      const buttonRegistrasi = document.getElementById("registrasi")

      /**
       * pattern to test validation password
       *
       * @param {string} value value string
       * @returns bool test pattern
       */
      const patternPassword = (value) => {
        const regex = /(?=.*?[a-z])(?=.*?[A-Z])(?=.*?\d).{6,}/
        return regex.test(value)
      }

      password.addEventListener("input", () => {
        if (patternPassword(password.value)) return password.classList.replace("is-invalid", "is-valid")
        password.classList.add("is-invalid")
      })

      document.addEventListener("input", () => {
        if (!patternPassword(password.value)) return (buttonRegistrasi.disabled = true)

        if (confirmPassword.value === password.value && patternPassword(confirmPassword.value)) {
          confirmPassword.classList.replace("is-invalid", "is-valid")
          return (buttonRegistrasi.disabled = false)
        }
        confirmPassword.classList.add("is-invalid")
        buttonRegistrasi.disabled = true
      })

      buttonRegistrasi.addEventListener("click", () => {
        if (username.value.trim() && password.value.trim() && confirmPassword.value.trim())
          return alert(`${username.value} berhasil registrasi!`)
      })
    </script>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2"
      crossorigin="anonymous"></script>
  </body>
</html>